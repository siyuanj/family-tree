<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>交互式家谱 (真·图谱版)</title>
    <!-- 1. 加载 Google Charts 库 -->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <!-- 2. 链接到你的 CSS 样式文件 -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <h1>交互式家谱 (真·图谱版)</h1>

    <div class="main-container">
        <!-- 控制面板 -->
        <div class="controls">
            <div id="view-panel"><h2>视图切换</h2><div class="action-btn-group"><button id="orgchart-view-btn" class="action-btn active" onclick="switchView('orgchart')">家谱视图</button><button id="timeline-view-btn" class="action-btn" onclick="switchView('timeline')">时间轴</button><button class="action-btn" onclick="print()">打印</button></div></div>
            <div class="panel-section"><h2>数据管理</h2><div class="action-btn-group"><label for="import-file" class="action-btn" style="background-color: #17a2b8; color: white; text-align: center; line-height: 2;">导入</label><input type="file" id="import-file" accept=".json" style="display: none;"><button id="exportBtn" class="action-btn" style="background-color: #007bff; color: white;">导出</button><button id="resetBtn" class="action-btn" style="background-color: #6c757d; color: white;">重置</button></div></div>
            <div id="add-member-panel" class="panel-section">
                <h2>添加新成员</h2>
                <div class="form-group"><label for="newName">姓名:</label><input type="text" id="newName"></div>
                <div class="form-group"><label for="newGender">性别:</label><select id="newGender"><option value="male">男</option><option value="female">女</option></select></div>
                <div class="form-group"><label for="newInfo">生平信息:</label><input type="text" id="newInfo" placeholder="例如：19xx - 20xx"></div>
                <div class="form-group"><label for="newFather">父亲:</label><select id="newFather"></select></div>
                <div class="form-group"><label for="newMother">母亲:</label><select id="newMother"></select></div>
                <div class="form-group"><label for="newSpouse">配偶:</label><select id="newSpouse"></select></div>
                <div class="form-group"><label for="newTooltip">悬停提示:</label><textarea id="newTooltip" rows="3"></textarea></div>
                <div class="form-group"><button id="addBtn">添加到家谱</button></div>
            </div>
            <div id="details-panel" class="panel-section">
                <h2>成员详情</h2>
                <div id="details-content"><p>请点击家谱中的任意成员进行操作。</p></div>
                <div id="details-actions" class="action-btn-group" style="margin-top: 15px;"></div>
            </div>
        </div>

        <!-- 图表容器 -->
        <div id="chart_div_container">
            <div id="orgchart_div"></div>
            <div id="timeline_div" style="display: none;"></div>
        </div>
    </div>
    
    <!-- 编辑弹窗 -->
    <div id="editModal" class="modal-overlay">
        <div class="modal-content">
            <h2>编辑成员信息</h2>
            <input type="hidden" id="editId">
            <div class="form-group"><label for="editName">姓名:</label><input type="text" id="editName"></div>
            <div class="form-group"><label for="editGender">性别:</label><select id="editGender"><option value="male">男</option><option value="female">女</option></select></div>
            <div class="form-group"><label for="editInfo">生平信息:</label><input type="text" id="editInfo"></div>
            <div class="form-group"><label for="editFather">父亲:</label><select id="editFather"></select></div>
            <div class="form-group"><label for="editMother">母亲:</label><select id="editMother"></select></div>
            <div class="form-group"><label for="editSpouse">配偶:</label><select id="editSpouse"></select></div>
            <div class="form-group"><label for="editTooltip">悬停提示:</label><textarea id="editTooltip" rows="3"></textarea></div>
            <div class="modal-actions"><button id="saveBtn">保存</button><button id="cancelBtn">取消</button></div>
        </div>
    </div>

    <!-- 3. 脚本加载顺序很重要：先加载数据，再加载使用数据的逻辑 -->
    <script src="data.js"></script>
    <script src="script.js"></script>
</body>
</html>